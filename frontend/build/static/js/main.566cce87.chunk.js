(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{43:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(52),i=n.n(r),s=(n(43),n(4)),o=n(91),u=n(26),l=n(7),j=n.n(l),d=n(21),b=n(13),h=n(14),p=n(16),O=n(15),m=n(31),f=n.n(m),x=function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[getCurrentUser_1] Sending request now!"),e.prev=1,e.next=4,f.a.get("http://localhost:5000/loginForm/user",{withCredentials:!0});case 4:return t=e.sent,console.log("[getCurrentUser_2:good] Response data.username:",t.data.username,typeof t.data.username),e.abrupt("return",t.data.username);case 9:return e.prev=9,e.t0=e.catch(1),console.log("[getCurrentUser_2] err msg:",e.t0.message),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[api:login] Sending req with:",t,n),e.prev=1,e.next=4,f.a.post("http://localhost:5000/loginForm/login",{username:t,password:n},{withCredentials:!0});case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),console.log("[api:login] err msg:",e.t0.message),e.abrupt("return",e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(j.a.mark((function e(t,n,a){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post("http://localhost:5000/loginForm/signup",{email:n,username:t,password:a},{withCredentials:!0});case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.log("err 34595:",e.t0.response),e.abrupt("return",e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(d.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete("http://localhost:5000/loginForm/logout",{withCredentials:!0});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=n(38),C=n(37),A=n(53),E=n(2),T=Object.freeze({ERROR:{title:"Error",duration:5e3},SUCCESS:"Success",NOTICE:{title:"Notice",duration:2e3}}),w=(Object.freeze({ERR_INCORRECT_PWD_OR_USERNAME:{type:T.ERROR,msg:"Incorrect password or username"},ERR_USERNAME_IS_ALREADY_TAKEN:{type:T.ERROR,msg:"Username is already registered"},ERR_EMAIL_IS_ALREADY_IN_USE:{type:T.ERROR,msg:"Email is already in use"},NOTICE_PWDS_DO_NOT_MATCH:{type:T.NOTICE,msg:"Passwords do not match"}}),Object(a.createContext)({})),k=Object(A.a)("notifId"),S=function(e){Object(p.a)(n,e);var t=Object(O.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={notifications:[]},e.createNotification=function(t){console.log(t),Object(C.a)(n,k)[k]++,console.log("[createNotification] -----"),console.log("[createNotification] Type:",t.type),console.log("[createNotification] msg:",t.msg),console.log("[createNotification] duration:",t.notification_duration),console.log("[createNotification] id:",Object(C.a)(n,k)[k]),console.log("[createNotification] -----");var a=Object(C.a)(n,k)[k];setTimeout((function(){return e.removeNotifBy(a)}),t.notification_duration);var c={id:a,type:t.type,msg:t.msg};e.setState((function(e){return{notifications:[].concat(Object(y.a)(e.notifications),[c])}})),console.log(e.state.notifications)},e.removeNotifBy=function(t){var n=e.state.notifications.findIndex((function(e){return e.id===t}));-1!==n?(console.log("id is present in notifications-arr, ",t),e.setState((function(e){var t=Object(y.a)(e.notifications);return t.splice(n,1),{notifications:t}}))):console.log("id is not present in notifications-arr, ",t)},e.removeNotifAt=function(t){e.setState((function(e){var n=Object(y.a)(e.notifications);return n.splice(t,1),{notifications:n}}))},e}return Object(h.a)(n,[{key:"render",value:function(){return Object(E.jsx)(w.Provider,{value:{notifications:this.state.notifications,removeNotifAt:this.removeNotifAt,removeNotifBy:this.removeNotifBy,createNotification:this.createNotification},children:this.props.children})}}]),n}(a.Component);Object.defineProperty(S,k,{writable:!0,value:0});var R=function(e){return Object(E.jsx)(w.Consumer,{children:function(e){var t=e.notifications,n=e.removeNotifAt;return Object(E.jsx)("div",{id:"notificationCenter",children:t.map((function(e,t){return Object(E.jsxs)("div",{className:"notif ".concat(e.type.toLowerCase()),onClick:function(){return n(t)},children:[Object(E.jsx)("div",{className:"icon",children:Object(E.jsx)("img",{src:window.location.origin+"/times.svg",alt:""})}),Object(E.jsxs)("div",{className:"message",children:[Object(E.jsx)("div",{className:"title",children:e.title}),e.msg]})]},t)}))})}})},U=c.a.createContext({username:"default___Value"}),_=U.Consumer,D=Object.freeze({AUTHENTICATED:1,UNAUTHENTICATED:2,PENDING:3}),I=function(e){Object(p.a)(n,e);var t=Object(O.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={username:null,isAuthenticated:D.PENDING},e.signup=function(){var t=Object(d.a)(j.a.mark((function t(n,a,c){var r,i,s=arguments;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>3&&void 0!==s[3]?s[3]:function(){},console.log("[auth:signup] Received ",n,a,c),t.next=4,v(n,a,c);case 4:if(200===(i=t.sent).status){t.next=8;break}return e.context.createNotification(i.data),t.abrupt("return",null);case 8:return r(),e.setState({username:i.data.username,isAuthenticated:D.AUTHENTICATED}),t.abrupt("return",i.data.username);case 11:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),e.login=function(){var t=Object(d.a)(j.a.mark((function t(n,a){var c,r,i=arguments;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=i.length>2&&void 0!==i[2]?i[2]:function(){},console.debug("[auth:login] ".concat(n,", ").concat(a)),t.next=4,g(n,a);case 4:return r=t.sent,console.log("[auth:login] res.status:",r.status),200!==r.status?(e.context.createNotification(r.data),e.setState({isAuthenticated:D.UNAUTHENTICATED})):(e.setState({username:r.data.username,isAuthenticated:D.AUTHENTICATED}),c()),t.abrupt("return",r.data.username);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.logout=Object(d.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N();case 2:e.setState({username:null,isAuthenticated:D.UNAUTHENTICATED});case 3:case"end":return t.stop()}}),t)}))),e.isAuthenticated=function(){return null!==e.state.username},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[auth:componentDidMount:1] Calling 'getCurrentUser'"),e.next=3,x();case 3:t=e.sent,console.log("[auth:componentDidMount:2] AuthProvider has gotten the username: ",this.state.username),t?this.setState({username:t,isAuthenticated:D.AUTHENTICATED}):this.setState({isAuthenticated:D.UNAUTHENTICATED});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(E.jsx)(U.Provider,{value:{username:this.state.username,signup:this.signup,login:this.login,logout:this.logout,isAuthenticated:this.state.isAuthenticated},children:this.props.children})}}]),n}(c.a.Component);I.contextType=w;var P=n(90),B=n(11),F=function(){var e=Object(s.f)(),t=Object(a.useContext)(U),n=(Object(a.useContext)(w),Object(a.useState)("sebastian")),c=Object(u.a)(n,2),r=c[0],i=c[1],o=Object(a.useState)("sebastian@mail.dk"),l=Object(u.a)(o,2),j=l[0],d=l[1],b=Object(a.useState)("123"),h=Object(u.a)(b,2),p=h[0],O=h[1];return Object(E.jsxs)(P.a.section,{id:"register",inital:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[Object(E.jsx)(R,{}),Object(E.jsxs)("form",{name:"signup_form",onSubmit:function(n){n.preventDefault(),t.signup(r,j,p,(function(){return e.push("/dashboard")}))},children:[Object(E.jsx)("h2",{children:"Register"}),Object(E.jsx)("input",{type:"text",name:"username",placeholder:"username",className:"field",value:r,onChange:function(e){return i(e.target.value)}}),Object(E.jsx)("input",{type:"text",name:"email",placeholder:"email",className:"field",value:j,onChange:function(e){return d(e.target.value)}}),Object(E.jsx)("input",{type:"text",name:"password",placeholder:"password",className:"field",value:p,onChange:function(e){return O(e.target.value)}}),Object(E.jsx)("input",{type:"text",name:"verifyPassword",placeholder:"verify password",className:"field"}),Object(E.jsxs)("div",{className:"vsplit",children:[Object(E.jsx)("input",{type:"submit",value:"Sign up",className:"btn recommendedOption"}),Object(E.jsx)(B.b,{to:"/login",children:Object(E.jsx)("button",{className:"btn",children:"Log in"})})]})]}),Object(E.jsx)(P.a.div,{initial:{opacity:0},animate:{opacity:1},transition:{duraction:1},children:Object(E.jsx)("img",{src:"",alt:""})})]})},H=n.p+"static/media/Background.436a2bcc.svg",M=function(){var e=Object(s.f)(),t=Object(a.useContext)(U),n=Object(a.useState)("sebastian3495"),c=Object(u.a)(n,2),r=c[0],i=c[1],o=Object(a.useState)("123"),l=Object(u.a)(o,2),j=l[0],d=l[1];return Object(E.jsxs)(P.a.div,{id:"login",inital:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[Object(E.jsxs)("form",{onSubmit:function(n){return function(n,a,c){n.preventDefault(),t.login(a,c,(function(){return e.push("/dashboard")}))}(n,r,j)},autoComplete:"off",children:[Object(E.jsx)(R,{}),Object(E.jsx)("h2",{children:"Login"}),Object(E.jsx)("input",{type:"text",name:"emailOrUsername",placeholder:"username",className:"field",value:r,onChange:function(e){return i(e.target.value)}}),Object(E.jsx)("input",{type:"text",name:"password",placeholder:"password",className:"field",value:j,onChange:function(e){return d(e.target.value)}}),Object(E.jsxs)("div",{className:"vsplit",children:[Object(E.jsx)("input",{type:"submit",value:"Sign in",className:"btn recommendedOption"}),Object(E.jsx)(B.b,{to:"/register",children:Object(E.jsx)("button",{className:"btn",children:" Register "})})]})]}),Object(E.jsx)(P.a.div,{transition:{duraction:1},initial:{opacity:0},animate:{opacity:1},children:Object(E.jsx)("img",{src:H,alt:""})})]})},L=function(e){Object(p.a)(n,e);var t=Object(O.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return console.log("[About] Rendering ..."),Object(E.jsx)(_,{children:function(t){var n=t.username,a=t.dummy;return Object(E.jsxs)("div",{children:[Object(E.jsx)("h1",{children:"About "}),JSON.stringify({username:n,dummy:a}),Object(E.jsx)("button",{onClick:function(){e.props.history.push("/dashboard")},children:"Goto dashboard"})]})}})}}]),n}(a.Component),G=function(){return Object(E.jsxs)("div",{id:"card",children:[Object(E.jsx)("div",{className:"img-container",children:Object(E.jsx)("img",{src:"https://i.gyazo.com/4e0c746edbadb3f81f3a1cb2a4be895d.jpg",alt:""})}),Object(E.jsx)("div",{className:"username female",children:"Emma"}),Object(E.jsx)("div",{className:"age",children:Object(E.jsx)("strong",{children:"21 \xe5r"})}),Object(E.jsx)("div",{className:"city",children:Object(E.jsx)("span",{children:"Aarhus"})})]})},z=function(e){Object(p.a)(n,e);var t=Object(O.a)(n);function n(){var e;Object(b.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={activeCollapsible:null},e.onToolbarButClick=function(t){e.setState({activeCollapsible:t.target.className.trim()})},e}return Object(h.a)(n,[{key:"render",value:function(){var e="filter"===this.state.activeCollapsible?"active":"",t="search"===this.state.activeCollapsible?"active":"";return Object(E.jsxs)("section",{id:"market",children:[Object(E.jsx)("h1",{style:{margin:"0 auto"},children:"Filter Projects"}),Object(E.jsxs)("div",{className:"toolbar",children:[Object(E.jsxs)("div",{className:"btn-container",children:[Object(E.jsx)("button",{className:"filter ".concat(e),onClick:this.onToolbarButClick,children:"Filter"}),Object(E.jsx)("button",{className:"search ".concat(t),onClick:this.onToolbarButClick,children:"Search"}),Object(E.jsx)("button",{className:"filter ".concat(e),onClick:this.onToolbarButClick,children:"Filter"}),Object(E.jsx)("button",{className:"search ".concat(t),onClick:this.onToolbarButClick,children:"Search"})]}),Object(E.jsxs)("div",{className:"collapsibles",children:[Object(E.jsx)("div",{className:"filter-collapsible ".concat(e),children:Object(E.jsxs)("div",{className:"filter-gender",children:[Object(E.jsx)("div",{className:"checkBox",children:"Kvinde"}),Object(E.jsx)("div",{className:"checkBox",children:"Mand"})]})}),Object(E.jsx)("div",{className:"search-collapsible ".concat(t),children:"Search-collapsible"})]})]}),Object(E.jsxs)("div",{className:"content",children:[Object(E.jsx)(G,{}),Object(E.jsx)(G,{}),Object(E.jsx)(G,{}),Object(E.jsx)(G,{}),Object(E.jsx)(G,{}),Object(E.jsx)(G,{})]})]})}}]),n}(a.Component),J=function(e){Object(p.a)(n,e);var t=Object(O.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("nav",{id:"navigation",children:Object(E.jsx)(B.b,{to:"/dashboard",className:"link",children:"dashboard"})})})}}]),n}(a.Component),q=function(e){Object(p.a)(n,e);var t=Object(O.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return console.log("[Dashboard] Rendering ..."),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(J,{}),Object(E.jsxs)(P.a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[Object(E.jsx)(z,{}),Object(E.jsx)(_,{children:function(e){var t=e.username,n=e.dummy;return Object(E.jsxs)("div",{children:[Object(E.jsx)(B.b,{to:"/user",children:"Goto User"}),Object(E.jsx)("h1",{children:"Dashboard "}),JSON.stringify({username:t,dummy:n}),Object(E.jsx)(B.b,{to:"/about",children:"Goto about"}),Object(E.jsx)(B.b,{to:"/",children:"Goto home"})]})}})]})]})}}]),n}(a.Component),K=n(39),W=n(55),Y=["component"],V=function(e){var t=e.component,n=Object(W.a)(e,Y),c=Object(s.f)(),r=Object(a.useContext)(U);return console.log(),console.log("[ProtectedRoute]"),console.log("[ProtectedRoute] username:",r.username),console.log("[ProtectedRoute] isAuthenticated:",r.isAuthenticated),console.log(),console.log("Rest"),console.log(n),console.log(),r.isAuthenticated===D.PENDING?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("div",{className:"loader"}),Object(E.jsx)("h1",{children:"Attempting to authenticate session"})]}):r.isAuthenticated===D.UNAUTHENTICATED?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("h1",{children:"User is not authenticated"}),Object(E.jsx)("button",{onClick:function(){return c.push("/login")},children:"Login"})]}):Object(E.jsx)(s.a,Object(K.a)(Object(K.a)({},n),{},{render:function(e){return Object(E.jsx)(t,Object(K.a)({},e))}}))},Q=function(e){var t=Object(a.useContext)(U);return console.log("[Home] authContext:",t),Object(E.jsx)(_,{children:function(n){var a=n.username;return Object(E.jsxs)("div",{children:[Object(E.jsxs)("h1",{children:["Username: ",a]}),Object(E.jsx)("button",{onClick:function(){return e.history.push("/dashboard")},children:"Dashboard"}),Object(E.jsx)("button",{onClick:function(){return e.history.push("/about")},children:"About"}),Object(E.jsx)("button",{onClick:function(){return e.history.push("/login")},children:"Login"}),Object(E.jsx)("button",{onClick:function(){return t.logout()},children:"Sign out"})]})}})},X=function(){var e=Object(s.g)();return Object(E.jsx)(S,{children:Object(E.jsx)(I,{children:Object(E.jsxs)(o.a,{exitBeforeEnter:!0,initial:!1,children:["  ",Object(E.jsxs)(s.c,{location:e,children:[Object(E.jsx)(V,{exact:!0,path:"/",component:Q}),Object(E.jsx)(V,{exact:!0,path:"/about",component:L}),Object(E.jsx)(V,{exact:!0,path:"/dashboard",component:q}),Object(E.jsx)(s.a,{exact:!0,path:"/register",component:F}),Object(E.jsx)(s.a,{exact:!0,path:"/login",component:M}),Object(E.jsx)(s.a,{path:"*",component:function(){return"404 Not found"}})]},e.pathname)]})})})};i.a.render(Object(E.jsx)(c.a.StrictMode,{children:Object(E.jsx)(B.a,{children:Object(E.jsx)(X,{})})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.566cce87.chunk.js.map